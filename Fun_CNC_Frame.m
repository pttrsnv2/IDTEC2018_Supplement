function [f,sigma,m] = Fun_CNC_Frame(x)

% Albert Patterson
% Case Study 1 Shape Optimization Code
% Manufacturabiliy Constraint Formulation for Design Under Hybrid
% Additive-Subtractive Manufacturing. 2018 ASME DETC Conference
% Submission.

% Moment on inertia, calulated using Case_1_Function_Generator

I = 60*x(9)*(x(2) + x(9)/2 + x(10) - (50*x(2)^2 + 60*x(9)*(x(2) + x(9)/2 + x(10)) + x(5)*x(6)*...
    (x(2) - x(6)/2 + x(10)) + x(3)*x(4)*(x(2) + x(3)/2) + x(8)*x(10)*(x(2) + x(10)/2))/(100*x(2)...
    + 60*x(9) + x(3)*x(4) + x(5)*x(6) + x(8)*x(10)))^2 + 100*x(2)*(x(2)/2 - (50*x(2)^2 + 60*x(9)*...
    (x(2) + x(9)/2 + x(10)) + x(5)*x(6)*(x(2) - x(6)/2 + x(10)) + x(3)*x(4)*(x(2) + x(3)/2) + x(8)*x(10)*...
    (x(2) + x(10)/2))/(100*x(2) + 60*x(9) + x(3)*x(4) + x(5)*x(6) + x(8)*x(10)))^2 + (x(3)^3*x(4))/12 +...
    (x(5)*x(6)^3)/12 + (x(8)*x(10)^3)/12 + (25*x(2)^3)/3 + 5*x(9)^3 + x(3)*x(4)*(x(2) + x(3)/2 - ...
    (50*x(2)^2 + 60*x(9)*(x(2) + x(9)/2 + x(10)) + x(5)*x(6)*(x(2) - x(6)/2 + x(10)) + x(3)*x(4)*(x(2) +...
    x(3)/2) + x(8)*x(10)*(x(2) + x(10)/2))/(100*x(2) + 60*x(9) + x(3)*x(4) + x(5)*x(6) + x(8)*x(10)))^2 +...
    x(8)*x(10)*(x(2) + x(10)/2 - (50*x(2)^2 + 60*x(9)*(x(2) + x(9)/2 + x(10)) + x(5)*x(6)*(x(2) - x(6)/2 + x(10))...
    + x(3)*x(4)*(x(2) + x(3)/2) + x(8)*x(10)*(x(2) + x(10)/2))/(100*x(2) + 60*x(9) + x(3)*x(4) + x(5)*x(6) + ...
    x(8)*x(10)))^2 + x(5)*x(6)*(x(2) - x(6)/2 + x(10) - (50*x(2)^2 + 60*x(9)*(x(2) + x(9)/2 + x(10)) + ...
    x(5)*x(6)*(x(2) - x(6)/2 + x(10)) + x(3)*x(4)*(x(2) + x(3)/2) + x(8)*x(10)*(x(2) + x(10)/2))/(100*x(2) +...
    60*x(9) + x(3)*x(4) + x(5)*x(6) + x(8)*x(10)))^2;

% Distance from neutral axis to furthest stress point
z = 80 - (50*x(2)^2 + 60*x(9)*(x(2) + x(9)/2 + x(10)) + x(5)*x(6)*(x(2) - x(6)/2 + x(10)) +...
    x(3)*x(4)*(x(2) + x(3)/2) + x(8)*x(10)*(x(2) + x(10)/2))/(100*x(2) + 60*x(9) +...
    x(3)*x(4) + x(5)*x(6) + x(8)*x(10));

% Input: Distributed load of 150N
W = 150;

% Input: Fixed length of frame
l = 150;

% Calculate bending stress (N/mm^2 or MPa)
sigma = ((W*l*z)/(I))

% Calculate mass (kg
m = (48*x(2))/3125 + (144*x(9))/15625 + (12*x(3)*x(4))/78125 + (12*x(5)*x(6))/78125 + (12*x(8)*x(10))/78125

% Case 1 shape optimization objective function
f = sigma + 10*m;

end
